<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>光復超人 2.0 - Mindmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script>
<script>
// Tree data generated by Python
const root = {"content": "光復超人 2.0", "children": [{"content": "地圖站點<br>地圖站點 Map<br>User<br>✓ 災民<br>我希望在網站地圖上看到「我住家與道路、水電修復進度」的標記（或圖片），以便判斷是否可以回家。<br>✓ 志工團體<br>我希望地圖清楚顯示「哪些街區/村落已清理」、「哪些志工還沒進場」，以便分配人力、避免重複清理或忽略某些區域。<br>✓ 配送志工（小蜜蜂）<br>我希望地圖標示物資倉庫、交通阻斷區域、搶修中道路，以便規劃最佳路線安全送達。<br>✓ 資料站點提供者（站點管理志工）<br>我希望可以自行新增站點位置（並上傳照片），讓大眾能看到最新站點資訊。<br>✓ 外地志工<br>我希望知道「哪些站點開放、收費與使用情況」，以便找到可以休息/洗澡/住宿的地方。<br>✓ 一般用戶<br>我希望地圖資訊能以平易方式呈現，不隱藏關鍵資訊，以便我快速理解如何使用地圖。<br>✓ 志工領隊<br>我希望知道災區「大致範圍」與影響區域，以便提前規劃行動。", "children": [{"content": "功能需求<br>資料模型<br>FR-MAP-01：地圖站點資料欄位通用化<br>FR-MAP-02：站點欄位可動態啟用（後台控制）<br>使用者操作<br>FR-MAP-03：使用者可新增站點（免登入）<br>FR-MAP-04：使用者可修改自己的站點（PIN 驗證）<br>FR-MAP-05：AI/規則檢查重複站點（距離 &lt; 20m）<br>後台審核流程<br>FR-MAP-06：新增站點 → 進入 ModerationQueue<br>FR-MAP-07：審核員可調整座標、分類、狀態<br>FR-MAP-08：審核通過 → 上架至 Stations 主表<br>地圖呈現<br>FR-MAP-09：支援多圖層（災區邊界、清理狀態、交通封閉）<br>FR-MAP-10：站點 Marker 顯示狀態（顏色區分 active / full / closed）<br>FR-MAP-11：站點資訊卡 (InfoCard) 支援照片輪播／導航連結<br>性能 / 離線<br>FR-MAP-12：前端快取地圖站點資料（避免反覆下載）<br>FR-MAP-13：支援低網速模式（簡化圖層）", "children": [{"content": "AI &amp; Data<br>將審核後的資訊（道路中斷/修復狀態）同步到 station 或 overlay 圖層<br>預留欄位讓 AI 標出「高風險區」圖層（未來）", "children": []}, {"content": "Backend<br>設計 Station 資料表：id, disaster_id, type, name, status, lat, lng, description, photos<br>建立 /stations CRUD API（含權限：只有站點負責人或後台可以改）<br>加上 Geo Index（依經緯度查附近站點）<br>支援依 disaster_id 切換不同災難資料", "children": [{"content": "SPEC 連結<br>SPEC<br>002-interactive-disaster-map<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/002-interactive-disaster-map", "children": []}]}, {"content": "Frontend<br>串接地圖套件（Leaflet/Mapbox/OSM），支援手機<br>呼叫 /stations API，依 disaster_id 顯示站點<br>支援篩選（站點類型、狀態）和地圖上點擊站點顯示資訊卡<br>低網速模式：預先載入/快取常用區塊", "children": []}, {"content": "UI/UX<br>視覺上分得清災區邊界、站點類型（物資/醫療/收容所/廁所）<br>手機版地圖操作容易（單手、放大縮小、點站點跳出資訊卡）<br>災民可以一眼看到「自己家附近修復狀況」<br>志工可以用顏色或圖示看出「已清理/待清理/危險區」", "children": []}]}]}, {"content": "志工任務<br>志工媒合 Volunteer Tasks<br>User<br>✓ 志工<br>我希望清楚了解災區的任務與優先順序（包含文字、圖片），讓我能依照能力投入真正急迫的任務。<br>✓ 災民<br>我希望可以填寫詳細需求（清理 / 搬運 / 協助 / 修繕...）<br>我希望需求能更新（送過驗證碼或 cookie）讓志工可以看到最新情況，不用重複聯繫。<br>✓ 災區組織 / 領隊<br>我希望能掌握每天志工數量與分佈情況，以避免某些區域人太多、某些區域人不夠。<br>✓ 災區組織（高層）<br>我希望有一個工具幫我統計志工人數與任務完成度，好在每晚彙報給政府或 NGO。<br>✓ 社福機構<br>我希望能找到災民所需的姓名與地址資料，以便追蹤救援狀況並保持資訊正確。", "children": [{"content": "功能需求<br>FR-TASK-01：災民可建立需求 → 產生 PIN<br>FR-TASK-02：災民可修改需求（PIN + cookie）<br>FR-TASK-03：任務分類（清理 / 搬運 / 修繕）<br>FR-TASK-04：任務可附加照片<br>FR-TASK-05：AI 初步分類（optional）<br>FR-TASK-06：志工任務列表（filter：距離、優先順序）<br>FR-TASK-07：志工接單 → 任務變更狀態<br>FR-TASK-08：任務狀態流轉（pending → working → done）<br>FR-TASK-09：群組任務（領隊管理多志工）<br>FR-TASK-10：任務逾期 / timeout 機制", "children": [{"content": "AI &amp; Data<br>用簡單分類 model/規則把任務分類（清理/搬運/醫療/心理支持...）<br>依任務內容估計緊急程度，提供排序建議給志工", "children": []}, {"content": "Backend<br>Task 資料表：id, disaster_id, type, description, photos, location, status, verify_pin, created_at<br>API：建立任務、查詢列表、依驗證碼修改、志工更新狀態<br>狀態機制：未處理 → 進行中 → 完成（含權限檢查）<br>基本濫用防護（同 IP 過度送出時限流）", "children": [{"content": "SPEC 連結<br>SPEC<br>003 Request-Management<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/003-request-management<br>SPEC<br>004-volunteer-dispatch<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/004-volunteer-dispatch", "children": []}]}, {"content": "Frontend<br>任務建立表單（不需登入），送出後顯示驗證碼<br>用 cookie 記住驗證碼，災民回來可以修改/取消需求<br>任務列表頁給志工：支援 filter, sort, 狀態更新按鈕<br>呼叫 /tasks API 以及 /tasks/{id}/status 更新", "children": []}, {"content": "UI/UX<br>災民填需求表單流程：超短、可附照片、可語音再轉文字（未來）<br>明顯顯示「需求目前處理到哪個狀態」<br>志工看任務列表時，可按地點/類型/緊急程度排序", "children": []}]}]}, {"content": "配送模組<br>配送媒合 Delivery（人＋物）<br>User<br>✓ 配送志工<br>我希望清楚知道物資供給與需求地點，以避免重複配送浪費人力。<br>我希望看到哪些居民需要接送、送醫、送物資，以選擇最適合的路線與任務。<br>我希望看到「哪些居民需要運送服務」、「哪些路段暫時不能走」，以便安全配送。<br>✓ 行動不便與弱勢災民<br>我希望有志工能協助我送餐、送物資、領藥、接送洗澡/醫療。讓我能安全生活。<br>✓ 煮食站負責人<br>我希望每天預計有多少志工/居民來用餐（目前無法統計），以便準備足夠食物避免浪費或短缺。<br>✓ 煮食站負責人<br>我希望可以避免大家亂填需求，希望有一個審核機制來確認真正需求。", "children": [{"content": "功能需求<br>FR-DELIVERY-01：災民可建立配送需求（人/物）<br>FR-DELIVERY-02：配送表單可填寫量/目的地<br>FR-DELIVERY-03：小蜜蜂任務列表<br>FR-DELIVERY-04：小蜜蜂接單 → 配送狀態變更<br>FR-DELIVERY-05：導航（Google 打開）<br>FR-DELIVERY-06：配送衝突檢查（避免多重接單）<br>FR-DELIVERY-07：食物/物資站可預估需求量", "children": [{"content": "AI &amp; Data<br>簡單路線建議：估算距離/時間（可以先用現成 API）<br>統計每天送出多少餐、多少人次（給 System Admin dashboard 用）", "children": []}, {"content": "Backend<br>DeliveryOrder 資料表：id, disaster_id, type(person/goods), pickup_location, dropoff_location, status, assigned_volunteer<br>API：建立配送單、列表查詢、接受訂單、更新狀態<br>基本鎖定機制：同一張單不能被兩位志工同時接（transaction/lock）<br>未來可與倉庫庫存表整合", "children": [{"content": "SPEC 連結<br>SPEC<br>003 Request-Management<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/003-request-management<br>SPEC<br>005-supply-management<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/005-supply-management", "children": []}]}, {"content": "Frontend<br>配送需求表單 → 呼叫 /deliveries 新增訂單<br>小蜜蜂視圖：顯示可接訂單列表＋「接受」按鈕<br>訂單詳細頁可更新狀態（運送中/已完成）<br>若有地圖整合：在地圖上畫出起點、終點、目前狀態", "children": []}, {"content": "UI/UX<br>災民填「配送需求」表單（食物/藥品/載人），流程清楚、可直接選「從某站到某地」<br>小蜜蜂看訂單列表可以快速理解：從哪裡 → 到哪裡 → 帶什麼/載誰<br>配送狀態在前端顯示清楚（未指派/有人接/運送中/完成）", "children": []}]}]}, {"content": "資訊頁面<br>資訊頁 Info Page<br>User<br>✓ 新手志工（第一次救援）<br>我希望看到清楚的「如何到現場、在哪報到、穿著建議、任務可能性、需要攜帶物品」以便安全前往災區。<br>✓ 救災團體<br>我希望網站能提供註冊地方，讓我們可以放招集資訊、志工資格、任務條件等。<br>✓ 災民 / 現場志工<br>我希望看到政府每天發布的救援速度與政策摘要，以便知道該怎麼向政府申請補助或加速救援。<br>✓ 志工<br>我希望看到「即時的準備工具」，以便快速應對任務變化。", "children": [{"content": "功能需求<br>FR-INFO-01：行前準備頁<br>FR-INFO-02：政府公告（每日更新）<br>FR-INFO-03：志工招募資訊<br>FR-INFO-04：現場狀況（NGO/官方來源）<br>FR-INFO-05：後台可分類：公告/招募/交通/安全<br>FR-INFO-06：多語系（optional）", "children": [{"content": "AI &amp; Data<br>把長文簡化成摘要（給前端顯示 short version）<br>自動標籤（type, tags），減少人工分類成本", "children": []}, {"content": "Backend<br>InfoItem 資料表：id, disaster_id, title, content, source, type, tags, updated_at, status<br>API：/info（可依 type, tags, disaster_id 篩選）<br>和 Moderator Admin 整合：「已審核」內容才會出現在 /info", "children": [{"content": "SPEC 連結<br>SPEC<br>007-information-publishing<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/007-information-publishing", "children": []}]}, {"content": "Frontend<br>靜態/半動態資訊區塊組合（從 /info API 取得）<br>支援 tag 或分類 filter（只看政府公告、只看行前準備...）<br>顯示資料最近更新時間與來源（提高信任）", "children": []}, {"content": "UI/UX<br>分區塊呈現：行前準備、現場狀況、物資資訊、政府公告、NGO 招募<br>給「第一次來的志工」一個超清楚的入口：「我現在要做什麼？」<br>手機版可以快速滑動瀏覽、用 anchor 快速跳段", "children": []}]}]}, {"content": "審核後台<br>資料審核後台 Moderator Admin<br>User<br>✓ 審核員<br>我希望有直覺的介面審核每筆資料，能看到 AI 建議、來源、最新時間比較，並能按鈕一次將資料輸入資料庫。<br>我希望可以一鍵上傳大量資料（從網路收集的內容），讓我快速處理大量資訊。<br>✓ 前線志工 / 領隊<br>我希望能一鍵匯出已審核資料，以便提供給災民或 NGO 進行救援。", "children": [{"content": "功能需求<br>FR-MOD-01：待審列表（需求/站點/資訊）<br>FR-MOD-02：審核詳情頁（AI 分析＋原文）<br>FR-MOD-03：Approve / Reject / Merge<br>FR-MOD-04：批次審核<br>FR-MOD-05：Audit Log", "children": [{"content": "AI &amp; Data<br>AI Verification Engine：輸入原文 → 回傳可信度分數＋抽取欄位<br>把 AI 結果寫入 AIResults 表，讓前端顯示「AI 建議」<br>紀錄「AI 判斷 vs 人工最後決定」，未來可優化模型", "children": []}, {"content": "Backend<br>ModerationQueue / InfoItem.status 欄位（pending/approved/rejected/outdated）<br>API：列出待審資料、更新審核結果、記錄審核人與時間<br>審核結果同步到 InfoItem / Station / Map overlay", "children": [{"content": "SPEC 連結<br>SPEC<br>007-information-publishing<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/007-information-publishing<br>SPEC<br>006-backend-administration<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/006-backend-administration", "children": []}]}, {"content": "Frontend<br>後台 web：登入後才能使用（Moderator 角色）<br>列表視圖：顯示待審 InfoItems / 外部資料<br>詳情視圖：顯示原文＋AI 分析（可信度、抽取的地點/時間/類型）<br>操作按鈕：Approve / Reject / Mark Outdated / Merge", "children": []}, {"content": "UI/UX<br>容易瀏覽大量待審資料：列表＋右側詳情（標題、內容、AI 建議）<br>一鍵「通過/退回/標記過期」，支援 keyboard shortcut<br>批次操作（一次處理多筆）", "children": []}]}]}, {"content": "系統管理<br>工程師後台 System Admin<br>User<br>✓ 工程師<br>我希望知道在災難剛發生時要選哪些欄位是必填或非必填，以便第一時間架起符合現場需求的系統。<br>我希望後台可以更改欄位字詞或增刪欄位，讓前端 UI 立即反映（無需修改 code）。<br>✓ 工程師 / 線上溝通志工<br>我希望後台可以看到<br>當前志工人數<br>訂單數<br>完成率<br>剩餘物資(optional)<br>以便傳達給前線領隊，安排資源。<br>✓ 工程師<br>我希望可以調整前端顯示方式（例如最近三天需求、特殊需求優先顯示），以便提升管理彈性。", "children": [{"content": "功能需求<br>FR-ADMIN-01：建立災難 instance<br>FR-ADMIN-02：管理站點欄位（可視化/必填/隱藏）<br>FR-ADMIN-03：模組開關（Map / Task / Delivery / Info）<br>FR-ADMIN-04：Dashboard（任務、配送、志工數）<br>FR-ADMIN-05：Config 下發 → 前端同步更新", "children": [{"content": "AI &amp; Data<br>Dashboard 可加上簡單 anomaly detection（流量異常、需求異常飆高）<br>收集所有 log / metrics，方便未來做災後分析", "children": []}, {"content": "Backend<br>DisasterInstance 表：id, name, region, active_modules, config_json<br>FieldConfig 表：針對不同功能的欄位設定<br>API：<br>/admin/disasters（CRUD）<br>/admin/config（讀寫欄位與模組設定）<br>/admin/stats（回傳 dashboard 數據）", "children": [{"content": "SPEC 連結<br>SPEC<br>006-backend-administration<br>https://github.com/GuangFuHero/optimized-version/tree/specs-planning/Backend/Spec/006-backend-administration", "children": []}]}, {"content": "Frontend<br>災難列表頁：所有 Disaster Instances<br>災難詳細頁：可調整<br>啟用模組（Map/Tasks/Delivery/Info）<br>表單欄位設定（必填/選填/隱藏）<br>前端文案模板<br>Dashboard：顯示任務數、完成率、配送量、活躍志工數、照片數、資料錯誤率 etc", "children": []}, {"content": "UI/UX<br>讓工程師/技術志工可以在一個畫面內：選擇災難 → 調整欄位/開關功能/看 dashboard<br>不會不小心改錯別的災難的 config（明確顯示當前災難）", "children": []}]}]}]};

// Initialize markmap
const { Markmap, deriveOptions } = window.markmap;
const mm = Markmap.create("svg#mindmap", deriveOptions(null), root);
window.mm = mm;

// Add toolbar
const toolbar = new markmap.Toolbar();
toolbar.attach(mm);
const el = toolbar.render();
el.setAttribute("style", "position:absolute;bottom:20px;right:20px");
document.body.append(el);

// Theme
document.documentElement.classList.add("markmap-dark");
</script>
</body>
</html>